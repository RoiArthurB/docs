---
sidebar_position: 2
---

# Create client

With a server connector, we can create a client:

```ts transpile
import { AdbServerClient } from "@yume-chan/adb";

const client: AdbServerClient = new AdbServerClient(connector);
```

This step doesn't send or receive any packets, it only initializes some internal states.

## Get devices

Use the `AdbServerClient#getDevices` method to get all connected devices, including those that are not authenticated yet.

The return value is an array of `AdbServerClient.Device` objects, which contains the device's serial number, product name, model name, and device name, as well as the transport ID used to create a transport later.

```ts
namespace AdbServerClient {
  interface Device {
    serial: string;
    authenticating: boolean;
    product?: string;
    model?: string;
    device?: string;
    transportId: bigint;
  }
}

declare class AdbServerClient {
  getDevices(): Promise<AdbServerClient.Device[]>;
}
```

```ts transpile
import type { AdbServerClient } from "@yume-chan/adb";

const devices: AdbServerClient.Device[] = await client.getDevices();
if (devices.length === 0) {
  alert("No device connected");
  return;
}

const device = devices[0];
```

## Create transport

Then use the `AdbServerClient#createTransport` method to create a transport and an `Adb` instance. The device must have already been authenticated.

Devices can be selected by either their transport ID, serial number, or connection type. Because `AdbServerClient.Device` has a `transportId` field, it can also be used as a `AdbServerClient.DeviceSelector`.

```ts
namespace AdbServerClient {
  type DeviceSelector =
    | { transportId: bigint }
    | { serial: string }
    | { usb: true }
    | { tcp: true }
    | undefined;
}

declare class AdbServerTransport implements AdbTransport {}

declare class AdbServerClient {
  createTransport(device: AdbServerClient.DeviceSelector): Promise<AdbServerTransport>;
}
```

```ts transpile
import { Adb } from "@yume-chan/adb";

const transport: AdbServerTransport = await client.createTransport(device);
const adb: Adb = new Adb(transport);
```

:::note[Next Step]

See [commands](../../api/index.mdx) for how to use the `Adb` instance.

:::

## Other commands

For other commands supported by `AdbServerClient`, see [server commands](./commands.mdx).
